FROM ruby:2.4

WORKDIR /usr/src

COPY ./jekyll/Gemfile /usr/src/Gemfile
COPY ./jekyll/Gemfile.lock /usr/src/Gemfile.lock

RUN bundle install

COPY ./.git /usr/src/.git
COPY ./jekyll/ /usr/src/

EXPOSE 80

CMD ["jekyll", "serve", "--watch", "--port", "80", "--host", "0.0.0.0", "--config", "_config.yml,_config_dev.yml"]
